<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hunter.blog.modules.article.dao.IArticleDao">
    <select id="getArticle" parameterType="java.lang.String"
            resultType="com.hunter.blog.modules.article.model.ArticleDo">
        SELECT
        art_id AS artId,
        art_title AS artTitle,
        art_content AS artContent,
        art_title_img AS artTitleImg,
        art_createTime AS artCreateTime,
        art_click_count AS artClickCount,
        art_comment AS artComment
        FROM
        sys_article
        <where>
            <if test="_parameter != null">
                AND art_title LIKE CONCAT('%', #{condition}, '%')
            </if>
            AND is_deleted = 1 AND art_status = "已发布"
        </where>
        ORDER BY art_createTime desc
    </select>


    <!-- 发布文章 -->
    <insert id="saveArticle" parameterType="com.hunter.blog.modules.article.model.ArticleDo">
        insert into
            sys_article(art_title,art_content,art_status,art_channel,art_createTime)
        values
            (#{articleDo.artTitle},#{articleDo.artContent},#{articleDo.artStatus},#{articleDo.artChannel},#{articleDo.artCreateTime})
    </insert>
</mapper>
